var _main = require('./main');

var _main2 = _interopRequireDefault(_main);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const linterUiDefault = {
  instances: new Set(),
  signalRegistry: null,
  statusBarRegistry: null,
  activate() {
    if (!atom.inSpecMode()) {
      // eslint-disable-next-line global-require
      require('atom-package-deps').install('linter-ui-default', true);
    }
  },
  deactivate() {
    for (const entry of this.instances) {
      entry.dispose();
    }
    this.instances.clear();
  },
  provideUI() {
    const instance = new _main2.default();
    this.instances.add(instance);
    if (this.signalRegistry) {
      instance.signal.attach(this.signalRegistry);
    }
    return instance;
  },
  provideIntentions() {
    return Array.from(this.instances).map(entry => entry.intentions);
  },
  consumeSignal(signalRegistry) {
    this.signalRegistry = signalRegistry;
    this.instances.forEach(function (instance) {
      instance.signal.attach(signalRegistry);
    });
  },
  consumeStatusBar(statusBarRegistry) {
    this.statusBarRegistry = statusBarRegistry;
    this.instances.forEach(function (instance) {
      instance.statusBar.attach(statusBarRegistry);
    });
  }
};

module.exports = linterUiDefault;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxpbnRlclVpRGVmYXVsdCIsImluc3RhbmNlcyIsIlNldCIsInNpZ25hbFJlZ2lzdHJ5Iiwic3RhdHVzQmFyUmVnaXN0cnkiLCJhY3RpdmF0ZSIsImF0b20iLCJpblNwZWNNb2RlIiwicmVxdWlyZSIsImluc3RhbGwiLCJkZWFjdGl2YXRlIiwiZW50cnkiLCJkaXNwb3NlIiwiY2xlYXIiLCJwcm92aWRlVUkiLCJpbnN0YW5jZSIsImFkZCIsInNpZ25hbCIsImF0dGFjaCIsInByb3ZpZGVJbnRlbnRpb25zIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiaW50ZW50aW9ucyIsImNvbnN1bWVTaWduYWwiLCJmb3JFYWNoIiwiY29uc3VtZVN0YXR1c0JhciIsInN0YXR1c0JhciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUVBOzs7Ozs7QUFHQSxNQUFNQSxrQkFBa0I7QUFDdEJDLGFBQVcsSUFBSUMsR0FBSixFQURXO0FBRXRCQyxrQkFBZ0IsSUFGTTtBQUd0QkMscUJBQW1CLElBSEc7QUFJdEJDLGFBQVc7QUFDVCxRQUFJLENBQUNDLEtBQUtDLFVBQUwsRUFBTCxFQUF3QjtBQUN0QjtBQUNBQyxjQUFRLG1CQUFSLEVBQTZCQyxPQUE3QixDQUFxQyxtQkFBckMsRUFBMEQsSUFBMUQ7QUFDRDtBQUNGLEdBVHFCO0FBVXRCQyxlQUFhO0FBQ1gsU0FBSyxNQUFNQyxLQUFYLElBQW9CLEtBQUtWLFNBQXpCLEVBQW9DO0FBQ2xDVSxZQUFNQyxPQUFOO0FBQ0Q7QUFDRCxTQUFLWCxTQUFMLENBQWVZLEtBQWY7QUFDRCxHQWZxQjtBQWdCdEJDLGNBQXNCO0FBQ3BCLFVBQU1DLFdBQVcsb0JBQWpCO0FBQ0EsU0FBS2QsU0FBTCxDQUFlZSxHQUFmLENBQW1CRCxRQUFuQjtBQUNBLFFBQUksS0FBS1osY0FBVCxFQUF5QjtBQUN2QlksZUFBU0UsTUFBVCxDQUFnQkMsTUFBaEIsQ0FBdUIsS0FBS2YsY0FBNUI7QUFDRDtBQUNELFdBQU9ZLFFBQVA7QUFDRCxHQXZCcUI7QUF3QnRCSSxzQkFBdUM7QUFDckMsV0FBT0MsTUFBTUMsSUFBTixDQUFXLEtBQUtwQixTQUFoQixFQUEyQnFCLEdBQTNCLENBQStCWCxTQUFTQSxNQUFNWSxVQUE5QyxDQUFQO0FBQ0QsR0ExQnFCO0FBMkJ0QkMsZ0JBQWNyQixjQUFkLEVBQXNDO0FBQ3BDLFNBQUtBLGNBQUwsR0FBc0JBLGNBQXRCO0FBQ0EsU0FBS0YsU0FBTCxDQUFld0IsT0FBZixDQUF1QixVQUFTVixRQUFULEVBQW1CO0FBQ3hDQSxlQUFTRSxNQUFULENBQWdCQyxNQUFoQixDQUF1QmYsY0FBdkI7QUFDRCxLQUZEO0FBR0QsR0FoQ3FCO0FBaUN0QnVCLG1CQUFpQnRCLGlCQUFqQixFQUE0QztBQUMxQyxTQUFLQSxpQkFBTCxHQUF5QkEsaUJBQXpCO0FBQ0EsU0FBS0gsU0FBTCxDQUFld0IsT0FBZixDQUF1QixVQUFTVixRQUFULEVBQW1CO0FBQ3hDQSxlQUFTWSxTQUFULENBQW1CVCxNQUFuQixDQUEwQmQsaUJBQTFCO0FBQ0QsS0FGRDtBQUdEO0FBdENxQixDQUF4Qjs7QUF5Q0F3QixPQUFPQyxPQUFQLEdBQWlCN0IsZUFBakIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuXG5pbXBvcnQgTGludGVyVUkgZnJvbSAnLi9tYWluJ1xuaW1wb3J0IHR5cGUgSW50ZW50aW9ucyBmcm9tICcuL2ludGVudGlvbnMnXG5cbmNvbnN0IGxpbnRlclVpRGVmYXVsdCA9IHtcbiAgaW5zdGFuY2VzOiBuZXcgU2V0KCksXG4gIHNpZ25hbFJlZ2lzdHJ5OiBudWxsLFxuICBzdGF0dXNCYXJSZWdpc3RyeTogbnVsbCxcbiAgYWN0aXZhdGUoKSB7XG4gICAgaWYgKCFhdG9tLmluU3BlY01vZGUoKSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGdsb2JhbC1yZXF1aXJlXG4gICAgICByZXF1aXJlKCdhdG9tLXBhY2thZ2UtZGVwcycpLmluc3RhbGwoJ2xpbnRlci11aS1kZWZhdWx0JywgdHJ1ZSlcbiAgICB9XG4gIH0sXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLmluc3RhbmNlcykge1xuICAgICAgZW50cnkuZGlzcG9zZSgpXG4gICAgfVxuICAgIHRoaXMuaW5zdGFuY2VzLmNsZWFyKClcbiAgfSxcbiAgcHJvdmlkZVVJKCk6IExpbnRlclVJIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBMaW50ZXJVSSgpXG4gICAgdGhpcy5pbnN0YW5jZXMuYWRkKGluc3RhbmNlKVxuICAgIGlmICh0aGlzLnNpZ25hbFJlZ2lzdHJ5KSB7XG4gICAgICBpbnN0YW5jZS5zaWduYWwuYXR0YWNoKHRoaXMuc2lnbmFsUmVnaXN0cnkpXG4gICAgfVxuICAgIHJldHVybiBpbnN0YW5jZVxuICB9LFxuICBwcm92aWRlSW50ZW50aW9ucygpOiBBcnJheTxJbnRlbnRpb25zPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMpLm1hcChlbnRyeSA9PiBlbnRyeS5pbnRlbnRpb25zKVxuICB9LFxuICBjb25zdW1lU2lnbmFsKHNpZ25hbFJlZ2lzdHJ5OiBPYmplY3QpIHtcbiAgICB0aGlzLnNpZ25hbFJlZ2lzdHJ5ID0gc2lnbmFsUmVnaXN0cnlcbiAgICB0aGlzLmluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICBpbnN0YW5jZS5zaWduYWwuYXR0YWNoKHNpZ25hbFJlZ2lzdHJ5KVxuICAgIH0pXG4gIH0sXG4gIGNvbnN1bWVTdGF0dXNCYXIoc3RhdHVzQmFyUmVnaXN0cnk6IE9iamVjdCkge1xuICAgIHRoaXMuc3RhdHVzQmFyUmVnaXN0cnkgPSBzdGF0dXNCYXJSZWdpc3RyeVxuICAgIHRoaXMuaW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgIGluc3RhbmNlLnN0YXR1c0Jhci5hdHRhY2goc3RhdHVzQmFyUmVnaXN0cnkpXG4gICAgfSlcbiAgfSxcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaW50ZXJVaURlZmF1bHRcbiJdfQ==